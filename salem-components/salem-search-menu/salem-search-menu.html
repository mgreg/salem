<link rel="import" href="../../bower_components/polymer/polymer.html">
<script src="../../bower_components/jquery/dist/jquery.min.js"></script>

<polymer-element name="salem-search-menu" attributes="categories" id="salem-search-menu">
    <template>
        <core-menu on-core-select="{{ onSelect }}" valueattr="label" id="coremenu">
            <template repeat="{{ cat in items }}">
                <core-submenu label="{{ cat.title }} ({{ cat.items.length }})">
                    <template repeat="{{ item in cat.items }}">
                        <core-item label="{{ item }}"</core-item>
                    </template>
                </core-submenu>
            </template>
        </core-menu>
    </template>

  <script>
    Polymer('salem-search-menu',{
      categories: [],
      items: [],
      selected: "",
      categoriesChanged: function(oV, nV) {
          this.selected = nV.selected;
          this.items = nV.items;
          this.$.coremenu.selected = this.selected;
          this.fire("select", {msg: this.selected});
      },
      onSelect: function(e, detail) {
          window.d = detail;
          if (detail.item.tagName.toLowerCase() == "core-submenu") {
              return;
          }
          this.fire("select", {msg: detail.item.label});
      }
    });

  </script>
</polymer-element>
